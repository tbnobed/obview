obview_app  | User is authenticated, proceeding
obview_app  | üîç [COMMENT API] POST /api/files/34/comments requested by user 2
obview_app  | üîç [COMMENT API] Request body: {"content":"How big did you say?","fileId":34,"parentId":null,"timestamp":155}
obview_app  | üîç [COMMENT API] User 2 authorized for file 34, validating comment data...
obview_app  | üîç [COMMENT API] Validation passed, comment data: {"content":"How big did you say?","fileId":34,"userId":2,"parentId":null,"timestamp":155}
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | üîç [COMMENT API] GET /api/files/34/comments requested by user 2
obview_app  | üîç [COMMENT API] User 2 authorized for file 34, fetching comments...
obview_app  | üîç [UNIFIED] Getting unified comments for file 34
obview_app  | üîç [COMMENTS] Getting authenticated comments for file 34
obview_app  | üîç [COMMENTS] Found 1 raw authenticated comments for file 34
obview_app  | üîç [COMMENTS] Returning 1 sanitized authenticated comments for file 34
obview_app  | üîç [UNIFIED] Got 1 authenticated comments
obview_app  | üîç [UNIFIED] Got 0 public comments
obview_app  | üîç [UNIFIED] Created 1 total unified comments for file 34
obview_app  | üîç [UNIFIED] Returning 1 sorted unified comments for file 34
obview_app  | üîç [COMMENT API] Returning 1 comments for file 34
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | üîç [UNIFIED] Getting unified comments for file 34
obview_app  | üîç [COMMENTS] Getting authenticated comments for file 34
obview_app  | üîç [COMMENTS] Found 1 raw authenticated comments for file 34
obview_app  | üîç [COMMENTS] Returning 1 sanitized authenticated comments for file 34
obview_app  | üîç [UNIFIED] Got 1 authenticated comments
obview_app  | üîç [UNIFIED] Got 0 public comments
obview_app  | üîç [UNIFIED] Created 1 total unified comments for file 34
obview_app  | üîç [UNIFIED] Returning 1 sorted unified comments for file 34
obview_app  | [PRODUCTION SHARE] Request for token: e3035bc58278c69e422422c3df06fa566b991893110fc8e3eff9425193f2c53a
obview_app  | [PRODUCTION SHARE] Found file: Dobson Best Of Exprt.mp4 (ID: 34)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 34 (Dobson Best Of Exprt.mp4) - type: video/mp4, path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Error sending file: write EPIPE
obview_app  | [PRODUCTION SHARE] Request for token: e3035bc58278c69e422422c3df06fa566b991893110fc8e3eff9425193f2c53a
obview_app  | [PRODUCTION SHARE] Found file: Dobson Best Of Exprt.mp4 (ID: 34)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 34 (Dobson Best Of Exprt.mp4) - type: video/mp4, path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Error sending file: write EPIPE
obview_app  | [PRODUCTION SHARE] Request for token: e3035bc58278c69e422422c3df06fa566b991893110fc8e3eff9425193f2c53a
obview_app  | [PRODUCTION SHARE] Found file: Dobson Best Of Exprt.mp4 (ID: 34)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 34 (Dobson Best Of Exprt.mp4) - type: video/mp4, path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Error sending file: write EPIPE
obview_app  | [PRODUCTION SHARE] Request for token: e3035bc58278c69e422422c3df06fa566b991893110fc8e3eff9425193f2c53a
obview_app  | [PRODUCTION SHARE] Found file: Dobson Best Of Exprt.mp4 (ID: 34)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 34 (Dobson Best Of Exprt.mp4) - type: video/mp4, path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Error sending file: Request aborted
obview_app  | [PRODUCTION SHARE] Request for token: e3035bc58278c69e422422c3df06fa566b991893110fc8e3eff9425193f2c53a
obview_app  | [PRODUCTION SHARE] Found file: Dobson Best Of Exprt.mp4 (ID: 34)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 34 (Dobson Best Of Exprt.mp4) - type: video/mp4, path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Error sending file: write EPIPE
obview_app  | [PRODUCTION SHARE] Request for token: e3035bc58278c69e422422c3df06fa566b991893110fc8e3eff9425193f2c53a
obview_app  | [PRODUCTION SHARE] Found file: Dobson Best Of Exprt.mp4 (ID: 34)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758823001893-198426905.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758823001893-198426905.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 34 (Dobson Best Of Exprt.mp4) - type: video/mp4, path: /app/uploads/1758823001893-198426905.mp4
obview_app  | üîç [PUBLIC COMMENT] Creating public comment with parentId: 20
obview_app  | üîç [PUBLIC COMMENT] Found parent comment 20 in regular comments table
obview_app  | üîç [PUBLIC COMMENT] Checking cycles with 0 public and 1 regular comments
obview_app  | üîç [CYCLE CHECK] Starting cycle check from parentId: 20
obview_app  | üîç [CYCLE CHECK] Visiting comment 20
obview_app  | üîç [CYCLE CHECK] Comment 20 has no parentId, ending chain
obview_app  | üîç [CYCLE CHECK] No cycle detected, traversed 1 comments
obview_app  | üîç [PUBLIC COMMENT] No cycle detected, proceeding with creation
obview_app  | üîç [UNIFIED] Getting unified comments for file 34
obview_app  | üîç [COMMENTS] Getting authenticated comments for file 34
obview_app  | üîç [COMMENTS] Found 1 raw authenticated comments for file 34
obview_app  | üîç [COMMENTS] Returning 1 sanitized authenticated comments for file 34
obview_app  | üîç [UNIFIED] Got 1 authenticated comments
obview_app  | Backend: Breaking self-parenting cycle for public comment 20
obview_app  | üîç [UNIFIED] Got 1 public comments
obview_app  | üîç [UNIFIED] Created 2 total unified comments for file 34
obview_app  | üîç [UNIFIED] Returning 2 sorted unified comments for file 34
obview_db   | 2025-09-25 19:38:39.920 UTC [27] LOG:  checkpoint starting: time
obview_db   | 2025-09-25 19:38:47.068 UTC [27] LOG:  checkpoint complete: wrote 74 buffers (0.5%); 0 WAL file(s) added, 0 removed, 0 recycled; write=7.132 s, sync=0.009 s, total=7.149 s; sync files=65, longest=0.002 s, average=0.001 s; distance=284 kB, estimate=284 kB; lsn=0/2EFABA0, redo lsn=0/2EFAB68