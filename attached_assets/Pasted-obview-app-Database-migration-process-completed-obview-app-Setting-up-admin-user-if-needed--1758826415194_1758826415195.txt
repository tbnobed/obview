obview_app  | Database migration process completed.
obview_app  | Setting up admin user if needed...
obview_app  | Connecting to database...
obview_app  | Admin user already exists, skipping creation
obview_app  | Setup completed successfully
obview_app  | Verifying filesystem utilities for admin cleanup operations...
obview_app  | ‚úÖ Upload directory write permissions verified
obview_app  | Found built server entry point: /app/dist/index.js
obview_app  | Starting the application...
obview_app  | Database connection mode: PostgreSQL (Docker/Production)
obview_app  | Using PostgreSQL session store with connection string
obview_app  | ‚úÖ Serving static files from: /app/dist/public
obview_app  | Using PostgreSQL session store with connection string
obview_app  | üöÄ Production server running on port 5000
obview_app  | üìÅ Static files served from: /app/dist/public
obview_app  | Database connection initialized successfully
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | [DEBUG] Getting files for project ID: 16
obview_app  | [DEBUG] Found 2 files for project ID 16
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | üé¨ [PROCESSING STATUS] Request for file ID: 34
obview_app  | üé¨ [PROCESSING STATUS] Request for file ID: 33
obview_app  | üé¨ [PROCESSING STATUS] Found processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasQualities: true,
obview_app  |   hasScrubVersion: true,
obview_app  |   qualitiesCount: 1,
obview_app  |   scrubPath: '/app/uploads/processed/34/scrub/Dobson Best Of Exprt_scrub.mp4'
obview_app  | }
obview_app  | üé¨ [PROCESSING STATUS] Found processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasQualities: true,
obview_app  |   hasScrubVersion: true,
obview_app  |   qualitiesCount: 1,
obview_app  |   scrubPath: '/app/uploads/processed/33/scrub/How to Make a Microsoft Account_scrub.mp4'
obview_app  | }
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | [DEBUG] File content requested for fileId: 33
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | [DEBUG] Database record found for file ID: 33 {
obview_app  |   filename: 'How to Make a Microsoft Account.mp4',
obview_app  |   fileType: 'video',
obview_app  |   filePath: '/app/uploads/1758822989246-398854149.mp4',
obview_app  |   isAvailable: true
obview_app  | }
obview_app  | [DEBUG] Checking if file exists at path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758822989246-398854149.mp4
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] File exists check result: true
obview_app  | Serving file 33 (How to Make a Microsoft Account.mp4) - type: video, path: /app/uploads/1758822989246-398854149.mp4
obview_app  | üé¨ [QUALITY ENDPOINT] Request for file ID: 33, quality: 720p
obview_app  | üé¨ [QUALITY ENDPOINT] Processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasQualities: true,
obview_app  |   availableQualities: [ '720p' ]
obview_app  | }
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | üé¨ [QUALITY ENDPOINT] Request for file ID: 33, quality: 720p
obview_app  | üé¨ [QUALITY ENDPOINT] Processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasQualities: true,
obview_app  |   availableQualities: [ '720p' ]
obview_app  | }
obview_app  | [PRODUCTION SHARE] Request for token: 85d9a4b7b7b4e19ff493eb19dd793a58d71e991e7a1aa0b60a1087b8d2c322a4
obview_app  | [PRODUCTION SHARE] Found file: How to Make a Microsoft Account.mp4 (ID: 33)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758822989246-398854149.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 33 (How to Make a Microsoft Account.mp4) - type: video/mp4, path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [PRODUCTION SHARE] Error sending file: Request aborted
obview_app  | [PRODUCTION SHARE] Request for token: 85d9a4b7b7b4e19ff493eb19dd793a58d71e991e7a1aa0b60a1087b8d2c322a4
obview_app  | [PRODUCTION SHARE] Found file: How to Make a Microsoft Account.mp4 (ID: 33)
obview_app  | [PRODUCTION SHARE] File path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [PRODUCTION SHARE] Checking if file exists at path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758822989246-398854149.mp4
obview_app  | [PRODUCTION SHARE] File exists check result: true
obview_app  | [PRODUCTION SHARE] Serving file 33 (How to Make a Microsoft Account.mp4) - type: video/mp4, path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [PRODUCTION SHARE] File sent successfully
obview_app  | [PRODUCTION SCRUB] Request for token: 85d9a4b7b7b4e19ff493eb19dd793a58d71e991e7a1aa0b60a1087b8d2c322a4
obview_app  | [PRODUCTION SCRUB] Found file: How to Make a Microsoft Account.mp4 (ID: 33)
obview_app  | [PRODUCTION SCRUB] Processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasScrubVersion: true,
obview_app  |   scrubPath: '/app/uploads/processed/33/scrub/How to Make a Microsoft Account_scrub.mp4'
obview_app  | }
obview_app  | [PRODUCTION SCRUB] Found scrub version at path: /app/uploads/processed/33/scrub/How to Make a Microsoft Account_scrub.mp4
obview_app  | [PRODUCTION SCRUB] Request for token: 85d9a4b7b7b4e19ff493eb19dd793a58d71e991e7a1aa0b60a1087b8d2c322a4
obview_app  | [PRODUCTION SCRUB] Found file: How to Make a Microsoft Account.mp4 (ID: 33)
obview_app  | [PRODUCTION SCRUB] Processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasScrubVersion: true,
obview_app  |   scrubPath: '/app/uploads/processed/33/scrub/How to Make a Microsoft Account_scrub.mp4'
obview_app  | }
obview_app  | [PRODUCTION SCRUB] Found scrub version at path: /app/uploads/processed/33/scrub/How to Make a Microsoft Account_scrub.mp4
obview_app  | Backend: Breaking self-parenting cycle for public comment 16
