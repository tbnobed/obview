 User is authenticated, proceeding
obview_app  | üîç [COMMENT API] GET /api/files/33/comments requested by user 2
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | [DEBUG] File content requested for fileId: 33
obview_app  | üîç [COMMENT API] User 2 authorized for file 33, fetching comments...
obview_app  | üîç [UNIFIED] Getting unified comments for file 33
obview_app  | üîç [COMMENTS] Getting authenticated comments for file 33
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | üîç [COMMENTS] Found 2 raw authenticated comments for file 33
obview_app  | üîç [COMMENTS] Returning 2 sanitized authenticated comments for file 33
obview_app  | üîç [UNIFIED] Got 2 authenticated comments
obview_app  | [DEBUG] Database record found for file ID: 33 {
obview_app  |   filename: 'How to Make a Microsoft Account.mp4',
obview_app  |   fileType: 'video',
obview_app  |   filePath: '/app/uploads/1758822989246-398854149.mp4',
obview_app  |   isAvailable: true
obview_app  | }
obview_app  | [DEBUG] Checking if file exists at path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] Checking file existence for path: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] File exists check success for: /app/uploads/1758822989246-398854149.mp4
obview_app  | [DEBUG] File exists check result: true
obview_app  | Serving file 33 (How to Make a Microsoft Account.mp4) - type: video, path: /app/uploads/1758822989246-398854149.mp4
obview_app  | Backend: Breaking self-parenting cycle for public comment 16
obview_app  | üîç [UNIFIED] Got 1 public comments
obview_app  | üîç [UNIFIED] Created 3 total unified comments for file 33
obview_app  | üîç [UNIFIED] Returning 3 sorted unified comments for file 33
obview_app  | üîç [COMMENT API] Returning 3 comments for file 33
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | üé¨ [QUALITY ENDPOINT] Request for file ID: 33, quality: 720p
obview_app  | üé¨ [QUALITY ENDPOINT] Processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasQualities: true,
obview_app  |   availableQualities: [ '720p' ]
obview_app  | }
obview_app  | Auth check - isAuthenticated: true
obview_app  | Auth check - session: Session {
obview_app  |   cookie: {
obview_app  |     path: '/',
obview_app  |     _expires: 2025-10-25T17:35:29.682Z,
obview_app  |     originalMaxAge: 2592000000,
obview_app  |     httpOnly: true,
obview_app  |     secure: true,
obview_app  |     sameSite: 'lax'
obview_app  |   },
obview_app  |   passport: { user: 2 }
obview_app  | }
obview_app  | Auth check - user: { id: 2, username: 'osandoval', role: 'admin' }
obview_app  | User is authenticated, proceeding
obview_app  | üé¨ [QUALITY ENDPOINT] Request for file ID: 33, quality: 720p
obview_app  | üé¨ [QUALITY ENDPOINT] Processing data: {
obview_app  |   status: 'completed',
obview_app  |   hasQualities: true,
obview_app  |   availableQualities: [ '720p' ]
obview_app  | }
obview_app  | üîç [UNIFIED] Getting unified comments for file 33
obview_app  | üîç [COMMENTS] Getting authenticated comments for file 33
obview_app  | üîç [COMMENTS] Found 2 raw authenticated comments for file 33
obview_app  | üîç [COMMENTS] Returning 2 sanitized authenticated comments for file 33
obview_app  | üîç [UNIFIED] Got 2 authenticated comments
obview_app  | Backend: Breaking self-parenting cycle for public comment 16
obview_app  | üîç [UNIFIED] Got 1 public comments
obview_app  | üîç [UNIFIED] Created 3 total unified comments for file 33
obview_app  | üîç [UNIFIED] Returning 3 sorted unified comments for file 33